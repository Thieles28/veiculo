# --------------------------
# Aplicação
# --------------------------
spring.application.name=veiculo
server.servlet.context-path=/api/v1

# --------------------------
# Banco de Dados
# --------------------------
spring.datasource.url=jdbc:postgresql://localhost:5432/vehicledb
spring.datasource.username=postgres
spring.datasource.password=postgres
spring.jpa.hibernate.ddl-auto=update
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.show-sql=true

# --------------------------
# Integrações externas
# --------------------------
# Feign clients (URLs mockadas locais)
f1.url=http://localhost:8080/soap/f1
f2.base-url=http://localhost:8080/api/v1/mock/f2
f3.base-url=http://localhost:8080/api/v1/mock/f3

# --------------------------
# Timeouts e Resiliência
# --------------------------
# Feign (se F2/F3 usar Feign)
feign.client.config.default.connectTimeout=2000
feign.client.config.default.readTimeout=2000

# Resilience4j
resilience4j.circuitbreaker.instances.vehicleAnalysis.registerHealthIndicator=true
resilience4j.circuitbreaker.instances.vehicleAnalysis.slidingWindowSize=10
resilience4j.circuitbreaker.instances.vehicleAnalysis.permittedNumberOfCallsInHalfOpenState=3
resilience4j.circuitbreaker.instances.vehicleAnalysis.waitDurationInOpenState=5000
resilience4j.retry.instances.vehicleAnalysis.maxAttempts=3
resilience4j.retry.instances.vehicleAnalysis.waitDuration=200
resilience4j.timelimiter.instances.vehicleAnalysis.timeoutDuration=2s

# Rate limit (exemplo 2 RPS F1)
resilience4j.ratelimiter.instances.f1RateLimit.limitForPeriod=2
resilience4j.ratelimiter.instances.f1RateLimit.limitRefreshPeriod=1s
resilience4j.ratelimiter.instances.f1RateLimit.timeoutDuration=500ms

# --------------------------
# Segurança JWT
# --------------------------
security.jwt.secret=${JWT_SECRET}
security.jwt.expiration=3600000

# --------------------------
# Logging JSON
# --------------------------
logging.pattern.console={"timestamp":"%d{yyyy-MM-dd'T'HH:mm:ss.SSSZ}","level":"%p","logger":"%c{1}","message":"%m"}%n

# --------------------------
# Observabilidade
# --------------------------
management.endpoints.web.exposure.include=health,info,metrics,prometheus
management.endpoint.health.show-details=always
